"use strict";(self.webpackChunkroblox_ts=self.webpackChunkroblox_ts||[]).push([[184],{8184:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var n=s(6528),o=s(964),a=s(4740),i=s(9124),r=s.n(i),l=s(8440),c=s(8168),d=s(2124),u=s(1504);const p="subNavBar_s2i2",h="playground_yo3h",g="editorWrapper_TO5z",m="pointer_U5I7";var f=s(8692),y=s(7624);const x={minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,insertSpaces:!1,tabSize:4},v={...x},w={...x,readOnly:!0},b=["Lava","t","Roact"],j=["types","compiler-types"],S={parser:"typescript",plugins:[c.cp,d.c],semi:!0,trailingComma:"all",singleQuote:!1,tabWidth:4,useTabs:!0,arrowParens:"avoid"};const $=new class{constructor(e){this.getValue=e,this.isInitialized=!1}get(){return this.isInitialized||(this.isInitialized=!0,this.value=this.getValue()),this.value}}((()=>new Worker("../rbxts-worker.js"))),_=new Set,E=/["']@rbxts\/([^"']+)["']/g,k=/\/\/\/\s*<reference path=["']([^"']+)["']\s*\/>/g,M=/\/\/\/\s*<reference types=["']@rbxts\/([^"']+)["']\s*\/>/g,C=/(?:import|export)\s+.+\s+from\s+['"]([^'"]+)['"]/g;function N(e,t){const s=new Array;for(const n of t.matchAll(e))s.push(n[1]);return s}const P="@rbxts",R="https://cdn.jsdelivr.net/npm";async function T(e){const t=e.split("/");return t[1].includes("@")||(t[1]+="@latest"),e=t.join("/"),fetch(`${R}/${e}`)}async function W(e,t){$.get().postMessage({type:"writeFile",filePath:`/node_modules/${e}`,content:t}),(await a.ek.init()).languages.typescript.typescriptDefaults.addExtraLib(t,e)}const F=new Set;async function I(e,t,s){if(void 0===s&&(s=!1),F.has(t))return Promise.resolve();F.add(t);const n=await T(t).then((e=>404===e.status?T(t=t.slice(0,-5)+"/index.d.ts"):e)).then((e=>e.text())),o=new Array;for(const a of N(k,n)){const s=r().resolve(r().dirname(t),a).substr(1);o.push(I(e,s))}for(let a of N(C,n))if((a.endsWith(".")||a.endsWith(".."))&&(a+="/index"),a.startsWith(P))o.push(K(a.substr(P.length+1)));else{const s=r().resolve(r().dirname(t),a).substr(1)+".d.ts";o.push(I(e,s))}for(const a of N(M,n))o.push(K(a));return await W(t,n),s&&(await a.ek.init()).languages.typescript.typescriptDefaults.addExtraLib(n,r().join(e,"index.d.ts")),Promise.allSettled(o)}async function K(e){if(!_.has(e)){_.add(e);const t=`${P}/${e}`,s=`${t}/package.json`,n=await T(s);if(200===n.status){const e=await n.json();await W(s,JSON.stringify(e)),console.log(`${t}@${e.version}`);const o=r().resolve(`/${t}`,e.main??"").substr(1),a=r().resolve(`/${t}`,e.types??e.typings??"index.d.ts").substr(1);$.get().postMessage({type:"setMapping",typingsPath:`/node_modules/${a}`,mainPath:`/node_modules/${o}`}),await I(t,a,!0)}else console.warn(`failed to download ${t}`)}}const L=e=>(0,y.jsx)("li",{children:(0,y.jsx)("a",{className:`${m} dropdown__link`,onClick:e.onClick,children:e.name})}),D=()=>{$.get();const[e,t]=u.useState(""),[s,i]=u.useState(""),[r,c]=u.useState(),[d,x]=u.useState(!1),[_,k]=u.useState(),M=(0,o.c)("playground-examples/src");function C(e){_?.setValue(e)}async function R(e){return async function(e,t){return fetch(`${e}/${t}.tsx`).then((e=>e.text()))}(M,e).then((e=>{C(e),t(e)}))}u.useEffect((()=>{_&&(""!==location.hash?(0,f.u)(location.hash).then((e=>{e&&(C(e),t(e))})):_&&""===_.getValue()&&R(b[0]))}),[_]);u.useEffect((()=>{_&&(location.hash=(0,f.T)(e))}),[e,_]),u.useEffect((()=>{d&&(void 0!==r&&window.clearTimeout(r),c(window.setTimeout((()=>{Promise.allSettled(N(E,e).map(K)).then((()=>{$.get().postMessage({type:"compile",source:e})}))}),300)))}),[e,d]),u.useEffect((()=>{$.get().addEventListener("message",(e=>{const t=e.data.source;"string"==typeof t&&i(t)}))}),[]),u.useEffect((()=>{Promise.allSettled(j.map((e=>K(e)))).then((()=>x(!0)))}),[]),u.useEffect((()=>{window.addEventListener("keydown",(e=>{(e.ctrlKey||e.metaKey)&&"KeyS"===e.code&&(e.preventDefault(),navigator.clipboard.writeText(location.href))}))}),[]);const{colorMode:T}=(0,n.U)(),W="dark"===T?"vs-dark":"light";return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("nav",{className:`${p} navbar`,children:(0,y.jsx)("div",{className:"navbar__inner",children:(0,y.jsx)("div",{className:"navbar__items",children:(0,y.jsxs)("div",{className:`navbar__item dropdown dropdown--hoverable ${m}`,children:[(0,y.jsx)("a",{className:`navbar__link ${m}`,children:"Examples"}),(0,y.jsx)("ul",{className:"dropdown__menu",children:b.map(((e,t)=>(0,y.jsx)(L,{name:e,onClick:()=>R(e)},t)))})]})})})}),(0,y.jsxs)("div",{className:h,children:[(0,y.jsx)("div",{className:g,children:(0,y.jsx)(a.cp,{language:"typescript",options:v,theme:W,onMount:s=>{a.ek.init().then((n=>{console.log(`typescript@${n.languages.typescript.typescriptVersion}`),n.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,allowSyntheticDefaultImports:!0,downlevelIteration:!0,module:n.languages.typescript.ModuleKind.CommonJS,moduleResolution:n.languages.typescript.ModuleResolutionKind.NodeJs,noLib:!0,strict:!0,target:n.languages.typescript.ScriptTarget.ESNext,typeRoots:[`node_modules/${P}`],noEmit:!0,resolveJsonModule:!0,experimentalDecorators:!0,baseUrl:".",rootDir:".",jsx:n.languages.typescript.JsxEmit.React,jsxFactory:"Roact.createElement",jsxFragmentFactory:"Roact.Fragment"});const o=n.Uri.file("input.tsx"),a=n.editor.getModel(o)||n.editor.createModel(e,"typescript",o);s.setModel(a);const i=s.onDidChangeModelContent((()=>t(s.getValue())));let r=!1;return s.addCommand(n.KeyMod.Alt|n.KeyMod.Shift|n.KeyCode.KeyF,(async()=>{if(!r){r=!0;const e=await l.cp.formatWithCursor(a.getValue(),{...S,printWidth:Math.min(120,s.getLayoutInfo().viewportColumn),cursorOffset:a.getOffsetAt(s.getPosition()||new n.Position(0,0)),rangeStart:void 0,rangeEnd:void 0});s.pushUndoStop(),s.executeEdits("prettier",[{range:a.getFullModelRange(),text:e.formatted}],(()=>[n.Selection.fromPositions(a.getPositionAt(e.cursorOffset))])),s.pushUndoStop(),r=!1}})),k(a),t(a.getValue()),()=>i.dispose()}))}})}),(0,y.jsx)("div",{className:g,children:(0,y.jsx)(a.cp,{language:"lua",options:w,theme:W,value:s})})]})]})}},8692:(e,t,s)=>{s.d(t,{T:()=>l,u:()=>r});var n=s(7888),o=s.n(n);const a="#code/",i="#gist/";async function r(e){if(e.startsWith(a)){const t=o().decompressFromEncodedURIComponent(e.substr(a.length));if(null!==t)return t}else if(e.startsWith(i)){const t=e.substr(i.length),s=await fetch(`https://api.github.com/gists/${t}`);if(200===s.status){const e=await s.json();return Object.values(e.files)[0].content}}}function l(e){return a+o().compressToEncodedURIComponent(e)}}}]);